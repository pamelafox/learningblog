<!doctype html>
<!--[if lt IE 7 ]> <html class="no-js ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]>    <html class="no-js ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]>    <html class="no-js ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--> <html class="no-js" lang="en" xmlns:fb="http://www.facebook.com/2008/fbml"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="">
  <title>Spriting with Compass</title>
  <meta name="description" content="">
  <meta name="author" content="Pamela Fox">
  <meta name="viewport" content="">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link rel="shortcut icon" href="/favicon.ico">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <link href="http://fonts.googleapis.com/css?family=Didact Gothic&subset=latin" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="/media/css/all-blog-min.css">
  <link rel="stylesheet" href="/media/css/syntax.css">
  <style>
  pre code {
    background-color: transparent;
  }
  code {
    background-color: transparent;
    font-weight: bold;
  }
  .post img {
    border: 1px solid #ccc;
  }
  </style>
        </head>
<body id="spriting-with-compass">

  
    
    <!-- Header -->
    <div id="header" class="topbar">
      <div class="topbar-inner">
          <div class="container">
           <h3>
              <a href="/learning" style="padding-right: 5px">
                <div class="logo" style="width: 112px; height: 40px; margin-right: 0px; background-repeat: no-repeat; background-image:url('/media/img/everydaylogo_trans.png')"></div>

              </a>
              <span style="color:white"> ...I'm learning.</span>
            </h3>
                      </div>
      </div>
    </div>
    <!-- /Header -->

    <!-- Main -->
    <div class="container"> 
      <div class="row">
       <div class="span11 columns">
        <article class="post">
    <div class="page-header">
        <h1 class="title">
            <a href="/learning/spriting-with-compass.html">
                Spriting with Compass
            </a>
        </h1>
        

        <time datetime="2011-08-28">
            Sunday, August 28, 2011
        </time>

        <div style="float:right">
            <a href="http://twitter.com/share"
                class="twitter-share-button"
                data-count="horizontal" 
                data-via="ringce">Tweet</a>
                <script type="text/javascript"
                    src="http://platform.twitter.com/widgets.js"></script>
            <!-- Place this tag where you want the +1 button to render -->
            <g:plusone size="small"></g:plusone>

            <!-- Place this render call where appropriate -->
            <script type="text/javascript">
              (function() {
                var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
                po.src = 'https://apis.google.com/js/plusone.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
              })();
            </script>
        </div>

        <div style="clear:right"></div>

    </div>
    
    <p>I use little icons in various places on <a href="http://everyday.io">everyday.io</a>, like to show
food bonuses in the&nbsp;stream:</p>
<p>
<img src="/media/images/streamsprites.png">
</p>

<p>The browser can take a while to load lots of images since it has to make a request for each one,
so I decided to implement icon spriting - baking all the images into one image,
and using background-position in <span class="caps">CSS</span> to make what appears like a standalone&nbsp;icon.
</p>
<p>
Thankfully, I was already using <a href="http://compass-style.org/"><span class="caps">SASS</span></a> and <a href="http://compass-style.org/">Compass</a> for my <span class="caps">CSS</span>, and it comes with <a href="http://compass-style.org/help/tutorials/spriting/
">built in&nbsp;spriting.</a>
</p>
<p>
After putting my icons in one folder (and sizing them all to be 16*16 pixels), I added this to the top of my .scss&nbsp;file:
</p>

<pre><code>@import "icon/*.png";
@include all-icon-sprites;
</code></pre>
<p>
I also specified sizing and display properties for the special &#8220;icon-sprite&#8221; class in my .scss&nbsp;file:
</p>

<pre><code>.icon-sprite {
  width: 16px;
  height: 16px;
  display: inline-block;
  margin-right: 2px;
}
</code></pre>
<p>
Compass then auto-generated <span class="caps">CSS</span> rules for my icons - one rule to specify the background for each of them, and a rule per icon to specify the background-position.
It also applies any of the &#8220;.icon-sprite&#8221; rules it found to all of the generated icon classes. Here&#8217;s a snippet of the auto-generated&nbsp;rules:
</p>

<pre><code>.icon-sprite, .icon-activity, .icon-android, .icon-bodylog, .icon-buddies, .icon-camera, .icon-comment, .icon-edit, .icon-female, .icon-foodlog, .icon-grassfedmeat, .icon-highfive, .icon-home, .icon-homecooked, .icon-localfood, .icon-logs, .icon-organicveg, .icon-profile, .icon-reminder, .icon-settings, .icon-settings2, .icon-stats, .icon-stats2, .icon-sustseafood, .icon-tip {
  background: url('/img/icon-s97f5308db7.png') no-repeat;
}

.icon-activity {
  background-position: 0 0;
}

.icon-android {
  background-position: 0 -27px;
}

/* line 99, ../sass/_common.scss */
.icon-sprite, .icon-activity, .icon-android, .icon-bodylog, .icon-buddies, .icon-camera, .icon-comment, .icon-edit, .icon-female, .icon-foodlog, .icon-grassfedmeat, .icon-highfive, .icon-home, .icon-homecooked, .icon-localfood, .icon-logs, .icon-organicveg, .icon-profile, .icon-reminder, .icon-settings, .icon-settings2, .icon-stats, .icon-stats2, .icon-sustseafood, .icon-tip {
  width: 16px;
  height: 16px;
  display: inline-block;
  margin-right: 2px;
}
</code></pre>
<p>
I measured the loading performance of my site before and after spriting, using the <a href="http://www.softwareishard.com/har/viewer/"><span class="caps">HAR</span> Viewer</a>, and these are the&nbsp;results:
</p>

<table>
  <tr>
   <td><b>Before:</b> <td>28 requests <td> 2.61s (onload: 1.92s, DOMContentLoaded: 1.64s)
  <tr>
   <td><b>After:</b>  <td> 15 requests <td> 1.09s (onload: 817ms, DOMContentLoaded: 600ms)
</table>

<p><p>As you can see, spriting had a significant effect on performance. I definitely recommend spriting (and Compass) for sites that display multiple images on page&nbsp;load.</p></p>
        <ul class="tags pills">
        <li><a class="small" href="/blog/tags/performance.html">
            performance
    </a>
        <li><a class="small" href="/blog/tags/css.html">
            css
    </a>
        </ul>
    
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'everydayimlearning';

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

</article>       </div>
       <div class="span5 columns">
          <div class="well" style="margin-top:20px">
            <img src="/media/img/profilepic.jpg" style="border: 1px solid #CCC; width: 90px; float: right; margin-left: 10px;">
            <p>
            Heyaz! I'm <a href="http://pamelafox.org">Pamela Fox</a>. A few months ago, I started working on <a href="http://everyday.io">everyday.io</a>,
            an app to help people change their eating habits for the better.
            </p>
            <p>
            I'm building it in Python with the Flask microframework, running it on 
            Google App Engine, and using PhoneGap to create Android and iPhone apps for it.
            I'm learning a lot along the way and using this blog to document what I learn.
            </p>
            <blockquote style="margin-top:35px">
             <p>The journey is the reward.</p>
             <small>Steve Jobs</small>
            </blockquote>
          </div>
        </div>
      </div>
     
    </div> 
    <!-- /Main -->

        
    <!-- Main -->
    <div id="footer"> 
      <div class="container">
        <p>Â© 2011 everyday.io. Powered by <a href="http://ringce.com/hyde">hyde</a>.
        </p>
      </div>
    </div>
    <!-- /Main -->

  
  
    <script src="/media/js/libs/zepto-min.js"></script>
  
      
<script>
$(document).ready(function() {
  function detectHash() {
    function maybeScrollToHash() {
      if (window.location.hash && $(window.location.hash).length) {
        var newTop = $(window.location.hash).offset().top - $('.topbar').height();
        $(window).scrollTop(newTop);
      }
    }

    $(window).bind('hashchange', function() {
      maybeScrollToHash();
    });

    maybeScrollToHash();
  }

  detectHash();
});
</script>

  </body>
</html>