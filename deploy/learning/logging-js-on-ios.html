<!doctype html>
<!--[if lt IE 7 ]> <html class="no-js ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]>    <html class="no-js ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]>    <html class="no-js ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--> <html class="no-js" lang="en" xmlns:fb="http://www.facebook.com/2008/fbml"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="">
  <title>Logging JS Errors on iOS with PhoneGap</title>
  <meta name="description" content="">
  <meta name="author" content="Pamela Fox">
  <meta name="viewport" content="">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link rel="shortcut icon" href="/favicon.ico">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <link href="http://fonts.googleapis.com/css?family=Didact Gothic&subset=latin" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="/media/css/all-blog-min.css">
  <link rel="stylesheet" href="/media/css/syntax.css">
  <style>
  pre code {
    background-color: transparent;
  }
  code {
    background-color: transparent;
    font-weight: bold;
  }
  .post img {
    border: 1px solid #ccc;
  }
  </style>
        </head>
<body id="logging-js-on-ios">

  
    
    <!-- Header -->
    <div id="header" class="topbar">
      <div class="topbar-inner">
          <div class="container">
           <h3>
              <a href="/learning" style="padding-right: 5px">
                <div class="logo" style="width: 112px; height: 40px; margin-right: 0px; background-repeat: no-repeat; background-image:url('/media/img/everydaylogo_trans.png')"></div>

              </a>
              <span style="color:white"> ...I'm learning.</span>
            </h3>
                      </div>
      </div>
    </div>
    <!-- /Header -->

    <!-- Main -->
    <div class="container"> 
      <div class="row">
       <div class="span11 columns">
        <article class="post">
    <div class="page-header">
        <h1 class="title">
            <a href="/learning/logging-js-on-ios.html">
                Logging JS Errors on iOS with PhoneGap
            </a>
        </h1>
        

        <time datetime="2011-10-26">
            Wednesday, October 26, 2011
        </time>

        <div style="float:right">
            <a href="http://twitter.com/share"
                class="twitter-share-button"
                data-count="horizontal" 
                data-via="ringce">Tweet</a>
                <script type="text/javascript"
                    src="http://platform.twitter.com/widgets.js"></script>
            <!-- Place this tag where you want the +1 button to render -->
            <g:plusone size="small"></g:plusone>

            <!-- Place this render call where appropriate -->
            <script type="text/javascript">
              (function() {
                var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
                po.src = 'https://apis.google.com/js/plusone.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
              })();
            </script>
        </div>

        <div style="clear:right"></div>

    </div>
    
    <p>I&#8217;ve spent the last few days getting my PhoneGap app working on an 
iPhone (an app which previously worked on Android). The hardest part 
has been learning to debug in the iOS browser, so I thought I&#8217;d post 
on my&nbsp;findings:
</p>

<ul>
  <li>To view the output of <code>console.log</code>, you must open the XCode console. 
The iOS browser &#8220;Debug console&#8221; that most iOS debugging articles mention 
is only displayed in the standalone Safari browser, not in the WebView (where 
PhoneGap <span class="caps">HTML</span> lives). 
  <li>There seem to be times when <code>console.log</code> does not log the output 
(perhaps during loading?) - in that case, <code>alert()</code> always seems to 
work. 
  <li>If you log a <span class="caps">JS</span> object using <code>console.log</code>, it will just print 
<code>"Object"</code> by default. You must <span class="caps">JSON</span> stringify it to be useful. 
  <li>You can also use <a href="http://debug.phonegap.com">debug.phonegap.com</a> (hosted weinre) to view the <span class="caps">DOM</span> 
and <span class="caps">JS</span> console logs as well. 
  <li>The WebView browser silently fails on <span class="caps">JS</span> errors - it stops running 
the <span class="caps">JS</span> code and does not report the error.  To see the error, you must 
wrap the offending code in a try/catch block. 
</ul>

<p>Given all of those learnings, here is my <code>log()</code> wrapper function that I use across my&nbsp;webapp:
</p>

<pre><code>function log(something) { 
    if (window.console){ 
      if (something instanceof Date) { 
        something = something.toDateString(); 
      } 
      if (isIOS() || isAndroid()) { 
        if (typeof something == 'object') { 
          something = JSON.stringify(something); 
        } 
        console.log(something); 
      } else { 
        console.log(something); 
      } 
    } 
}
</code></pre>
<p>And I wrap various code blocks in try/catch, like the callback function for <span class="caps">AJAX</span>&nbsp;requests: 
</p>

<pre><code>try { 
  onSuccess(processJSON(responseJSON)); 
} catch(e) { 
  log(e); 
}
</code></pre>
<p>I posted my observations in the <a href="http://groups.google.com/group/phonegap/browse_thread/thread/62cf653d67e015ba">PhoneGap group</a>
and the developers there made several recommendations: 1) use <a href="https://chrome.google.com/webstore/detail/geelfhphabnejjhdalkjhgipohgpdnoc">Ripple</a>,
a Chrome extension for mobile emulation 2) monkey-patch <span class="caps">JS</span> functions to always try-catch, as done in this <a href="https://github.com/pmuellr/log-callback-error">library</a>.
I&#8217;ve taken a break from iOS debugging for a few days, but I&#8217;ll probably revisit debugging soon and try out their&nbsp;ideas.
</p>
        <ul class="tags pills">
        <li><a class="small" href="/blog/tags/phonegap.html">
            phonegap
    </a>
        <li><a class="small" href="/blog/tags/javascript.html">
            javascript
    </a>
        </ul>
    
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'everydayimlearning';

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

</article>       </div>
       <div class="span5 columns">
          <div class="well" style="margin-top:20px">
            <img src="/media/img/profilepic.jpg" style="border: 1px solid #CCC; width: 90px; float: right; margin-left: 10px;">
            <p>
            Heyaz! I'm <a href="http://pamelafox.org">Pamela Fox</a>. A few months ago, I started working on <a href="http://everyday.io">everyday.io</a>,
            an app to help people change their eating habits for the better.
            </p>
            <p>
            I'm building it in Python with the Flask microframework, running it on 
            Google App Engine, and using PhoneGap to create Android and iPhone apps for it.
            I'm learning a lot along the way and using this blog to document what I learn.
            </p>
            <blockquote style="margin-top:35px">
             <p>The journey is the reward.</p>
             <small>Steve Jobs</small>
            </blockquote>
          </div>
        </div>
      </div>
     
    </div> 
    <!-- /Main -->

        
    <!-- Main -->
    <div id="footer"> 
      <div class="container">
        <p>Â© 2011 everyday.io. Powered by <a href="http://ringce.com/hyde">hyde</a>.
        </p>
      </div>
    </div>
    <!-- /Main -->

  
  
    <script src="/media/js/libs/zepto-min.js"></script>
  
      
<script>
$(document).ready(function() {
  function detectHash() {
    function maybeScrollToHash() {
      if (window.location.hash && $(window.location.hash).length) {
        var newTop = $(window.location.hash).offset().top - $('.topbar').height();
        $(window).scrollTop(newTop);
      }
    }

    $(window).bind('hashchange', function() {
      maybeScrollToHash();
    });

    maybeScrollToHash();
  }

  detectHash();
});
</script>

  </body>
</html>