<!doctype html>
<!--[if lt IE 7 ]> <html class="no-js ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]>    <html class="no-js ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]>    <html class="no-js ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--> <html class="no-js" lang="en" xmlns:fb="http://www.facebook.com/2008/fbml"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="">
  <title>PhoneGap Loading Performance in iOS</title>
  <meta name="description" content="">
  <meta name="author" content="Pamela Fox">
  <meta name="viewport" content="">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link rel="shortcut icon" href="/favicon.ico">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <link href="http://fonts.googleapis.com/css?family=Didact Gothic&subset=latin" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="/media/css/all-blog-min.css">
  <link rel="stylesheet" href="/media/css/syntax.css">
  <style>
  pre code {
    background-color: transparent;
  }
  code {
    background-color: transparent;
    font-weight: bold;
  }
  .post img {
    border: 1px solid #ccc;
  }
  </style>
        </head>
<body id="phonegap-loading-performance">

  
    
    <!-- Header -->
    <div id="header" class="topbar">
      <div class="topbar-inner">
          <div class="container">
           <h3>
              <a href="/learning" style="padding-right: 5px">
                <div class="logo" style="width: 112px; height: 40px; margin-right: 0px; background-repeat: no-repeat; background-image:url('/media/img/everydaylogo_trans.png')"></div>

              </a>
              <span style="color:white"> ...I'm learning.</span>
            </h3>
                      </div>
      </div>
    </div>
    <!-- /Header -->

    <!-- Main -->
    <div class="container"> 
      <div class="row">
       <div class="span11 columns">
        <article class="post">
    <div class="page-header">
        <h1 class="title">
            <a href="/learning/phonegap-loading-performance.html">
                PhoneGap Loading Performance in iOS
            </a>
        </h1>
        

        <time datetime="2011-10-21">
            Friday, October 21, 2011
        </time>

        <div style="float:right">
            <a href="http://twitter.com/share"
                class="twitter-share-button"
                data-count="horizontal" 
                data-via="ringce">Tweet</a>
                <script type="text/javascript"
                    src="http://platform.twitter.com/widgets.js"></script>
            <!-- Place this tag where you want the +1 button to render -->
            <g:plusone size="small"></g:plusone>

            <!-- Place this render call where appropriate -->
            <script type="text/javascript">
              (function() {
                var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
                po.src = 'https://apis.google.com/js/plusone.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
              })();
            </script>
        </div>

        <div style="clear:right"></div>

    </div>
    
    <p>
As I wrote about earlier, I&#8217;ve been working on the performance of my PhoneGap app, implementing many of the suggestions from 
<a href="http://floatlearning.com/2011/03/developing-better-phonegap-apps/">this article</a>.
</p>
<p>
One of the suggestions that article makes is to switch frameworks from something heavy like jQuery (which includes a lot of extra code that may not be necessary on mobile browsers) to something lighter like Zepto or&nbsp;<span class="caps">XUI</span>.
</p>
<p>
I currently use jQuery in my app &#8212; not because I use jQuery a lot in my own code, but because I use a handful of third-party-written jQuery plugins. I could easily port over my own code to a new framework but I don&#8217;t know how easy it would be to port over someone&nbsp;else&#8217;s.
</p>
<p>
So, before I looked into porting from jQuery, I wanted to figure out exactly what effect jQuery had on performance. I&#8217;m most concerned with loading performance versus already-running performance as that&#8217;s where I perceive the greatest latency in my app, so I decided to see how long it took for the browser to load my <span class="caps">HTML</span>, <span class="caps">CSS</span>, and&nbsp;<span class="caps">JS</span>.
</p>
<p>
First I wrote a basic function to record times of events and I used it to record events after the <span class="caps">CSS</span>, <span class="caps">HTML</span>, jQuery script tag, other script tag, document ready, and execution of my  setup function. This is a stripped down version of what it looked&nbsp;like:
</p>

<script src="https://gist.github.com/1302665.js?file=phonegap.html"></script>

<p>
Then I recorded the times in Chrome, iPhone Simulator, and actual iPhone (on the same <span class="caps">WIFI</span> network), and graphed them in <a href="https://docs.google.com/spreadsheet/ccc?key=0Ah0xU81penP1dE91SWNtOEJ5UXhVNWJlaVl0NU1ySmc&hl=en_US">a spreadsheet</a>. 
Here&#8217;s a chart of the&nbsp;results:
</p>

<script type="text/javascript" src="//ajax.googleapis.com/ajax/static/modules/gviz/1.0/chart.js"> {"dataSourceUrl":"//docs.google.com/spreadsheet/tq?key=0Ah0xU81penP1dE91SWNtOEJ5UXhVNWJlaVl0NU1ySmc&transpose=0&headers=1&range=A1%3AD8&gid=0&pub=1","options":{"reverseCategories":false,"titleX":"MS Elapsed Since Last Event","backgroundColor":"#FFFFFF","width":600,"logScale":false,"hAxis":{"minValue":null,"viewWindowMode":"pretty","viewWindow":{"min":null,"max":null},"maxValue":null},"hasLabelsColumn":true,"vAxes":[{"title":"Event"}],"title":"PhoneGap Loading Performance","height":371,"legend":"top","reverseAxis":false,"isStacked":false},"state":{},"chartType":"BarChart","chartName":"Chart 1"} </script>

<p>
As you can see from the chart, the iPhone browser is noticeably slower than Chrome and the simulator, and the jQuery script tag (90 <span class="caps">KB</span>) takes 35% of the loading time - same as the custom script tag (<span class="caps">220KB</span>). But it&#8217;s only 300ms, which isn&#8217;t as slow as I expected and for now, it doesn&#8217;t seem worth it for me to try to port away from&nbsp;jQuery.
</p>
        <ul class="tags pills">
        <li><a class="small" href="/blog/tags/phonegap.html">
            phonegap
    </a>
        <li><a class="small" href="/blog/tags/performance.html">
            performance
    </a>
        </ul>
    
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'everydayimlearning';

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

</article>       </div>
       <div class="span5 columns">
          <div class="well" style="margin-top:20px">
            <img src="/media/img/profilepic.jpg" style="border: 1px solid #CCC; width: 90px; float: right; margin-left: 10px;">
            <p>
            Heyaz! I'm <a href="http://pamelafox.org">Pamela Fox</a>. A few months ago, I started working on <a href="http://everyday.io">everyday.io</a>,
            an app to help people change their eating habits for the better.
            </p>
            <p>
            I'm building it in Python with the Flask microframework, running it on 
            Google App Engine, and using PhoneGap to create Android and iPhone apps for it.
            I'm learning a lot along the way and using this blog to document what I learn.
            </p>
            <blockquote style="margin-top:35px">
             <p>The journey is the reward.</p>
             <small>Steve Jobs</small>
            </blockquote>
          </div>
        </div>
      </div>
     
    </div> 
    <!-- /Main -->

        
    <!-- Main -->
    <div id="footer"> 
      <div class="container">
        <p>Â© 2011 everyday.io. Powered by <a href="http://ringce.com/hyde">hyde</a>.
        </p>
      </div>
    </div>
    <!-- /Main -->

  
  
    <script src="/media/js/libs/zepto-min.js"></script>
  
      
<script>
$(document).ready(function() {
  function detectHash() {
    function maybeScrollToHash() {
      if (window.location.hash && $(window.location.hash).length) {
        var newTop = $(window.location.hash).offset().top - $('.topbar').height();
        $(window).scrollTop(newTop);
      }
    }

    $(window).bind('hashchange', function() {
      maybeScrollToHash();
    });

    maybeScrollToHash();
  }

  detectHash();
});
</script>

  </body>
</html>